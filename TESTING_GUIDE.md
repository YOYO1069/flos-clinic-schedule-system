# 診所排班系統測試指引

## 系統網址
https://effulgent-dasik-9e082a.netlify.app/

## 測試帳號

### 管理者帳號
- **帳號**: ADMIN-HBH012
- **密碼**: Staff@HBH2025
- **權限**: 可編輯休假月曆、管理員工、重設密碼、查看所有功能

### 高階主管帳號
- **帳號**: SUPER-LDX011
- **密碼**: Staff@LDX2025
- **權限**: 可編輯休假月曆、查看所有功能

### 一般主管帳號
- **帳號**: SUPER-WQ001
- **密碼**: Staff@WQ2025
- **權限**: 可編輯休假月曆、查看所有功能

### 一般員工帳號
- **帳號**: STAFF-LZX003
- **密碼**: Staff@LZX2025
- **權限**: 只能查看休假月曆(不能編輯)、打卡、修改自己的密碼

---

## 測試項目

### 1. 權限控制測試

#### 測試一般員工不能編輯休假月曆
1. 使用 `STAFF-LZX003` / `Staff@LZX2025` 登入
2. 進入「員工休假月曆」頁面
3. **預期結果**: 點擊任何日期格子,應該不會出現 OFF 標記(已修復權限漏洞)

#### 測試主管可以編輯休假月曆
1. 使用 `SUPER-WQ001` / `Staff@WQ2025` 登入
2. 進入「員工休假月曆」頁面
3. **預期結果**: 點擊日期格子,可以切換 OFF 標記

---

### 2. 修改密碼功能測試

#### 一般員工修改密碼
1. 使用 `STAFF-LZX003` / `Staff@LZX2025` 登入
2. 在「員工休假月曆」頁面點擊「修改密碼」按鈕
3. 輸入舊密碼: `Staff@LZX2025`
4. 輸入新密碼: `NewPassword123!`
5. 確認新密碼: `NewPassword123!`
6. 點擊「確認修改」
7. **預期結果**: 顯示成功訊息,登出後可用新密碼登入

#### 測試舊密碼驗證
1. 使用任何帳號登入
2. 進入修改密碼頁面
3. 輸入錯誤的舊密碼
4. **預期結果**: 顯示「舊密碼錯誤」訊息,不允許修改

---

### 3. 管理者密碼救援功能測試

#### 重設員工密碼
1. 使用 `ADMIN-HBH012` / `Staff@HBH2025` 登入
2. 點擊「管理者主控台」
3. 在「密碼救援」區塊選擇要重設密碼的員工
4. 輸入新密碼: `ResetPassword123!`
5. 點擊「重設密碼」
6. **預期結果**: 顯示成功訊息
7. 登出後使用該員工帳號和新密碼登入,應該成功

#### 測試非管理者無法訪問
1. 使用非管理者帳號登入(如 `STAFF-LZX003`)
2. **預期結果**: 不應該看到「管理者主控台」按鈕

---

### 4. 快速打卡功能測試

#### 打卡記錄
1. 使用任何帳號登入
2. 在「員工休假月曆」頁面點擊「打卡」按鈕
3. **預期結果**: 顯示成功訊息,記錄上班時間
4. 點擊「打卡記錄」查看
5. **預期結果**: 應該看到剛才的打卡記錄

#### 下班打卡
1. 在已有上班記錄的情況下,再次點擊「打卡」
2. **預期結果**: 更新為下班時間

---

### 5. 完整流程測試

#### 新員工首次使用流程
1. 使用預設密碼登入
2. 修改密碼為自己的密碼
3. 查看休假月曆(確認權限正確)
4. 進行打卡
5. 查看打卡記錄

#### 員工忘記密碼流程
1. 聯絡管理者
2. 管理者使用密碼救援功能重設密碼
3. 員工使用新密碼登入
4. 員工自行修改為自己的密碼

---

## 已知問題與修復

### ✅ 已修復:一般員工可以編輯休假月曆
- **問題**: 之前一般員工可以點擊並修改休假月曆
- **修復**: 在 `toggleLeave` 函數中新增權限檢查
- **驗證**: 使用 `STAFF-LZX003` 登入,點擊日期格子應該無效

---

## 功能清單

### 已完成功能 ✅
- [x] 15 位員工帳號建立(管理者1、高階主管2、一般主管2、一般員工11)
- [x] 角色權限控制(admin, senior_supervisor, supervisor, staff)
- [x] 休假月曆顯示與編輯(僅主管以上可編輯)
- [x] 快速打卡功能
- [x] 打卡記錄查看
- [x] 員工修改密碼功能
- [x] 管理者密碼救援功能
- [x] 權限漏洞修復(一般員工不能編輯月曆)

### 系統特色
- 資料儲存在 Supabase 雲端資料庫
- 自動部署到 Netlify
- 響應式設計,支援手機和電腦
- 清晰的導航結構,所有頁面都有返回按鈕

---

## 資料庫結構

### users 表
- id, username, password, role, name, created_at

### staff_members 表
- id, name, position, created_at

### leave_records 表
- id, staff_id, leave_date, created_at

### attendance_records 表
- id, user_id, clock_in_time, clock_out_time, created_at

---

## 技術架構

- **前端**: React + Vite + Tailwind CSS
- **後端**: Supabase (PostgreSQL)
- **部署**: Netlify (自動部署)
- **版本控制**: GitHub

---

## 聯絡資訊

如有問題或需要協助,請聯絡系統管理者。
