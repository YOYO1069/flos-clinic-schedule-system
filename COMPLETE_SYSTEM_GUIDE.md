# FLOS 排班系統 - 完整使用指南

## 🎉 系統已完成！

所有功能已實裝完成，包含：
- ✅ 完整的管理員功能
- ✅ 三級權限分層
- ✅ 打卡系統（含 GPS 定位）
- ✅ 請假管理系統
- ✅ 歷史記錄保留

---

## 🌐 系統資訊

**網址：** https://effulgent-dasik-9e082a.netlify.app

**部署狀態：** Netlify 正在部署中（約 90 秒完成）

**資料庫：** Supabase（已修復所有資料表結構）

---

## 👥 使用者角色與權限

### 1. 管理員（admin）
**代表人物：** 黃柏翰（flosHBH012）

**專屬功能：**
- 📊 管理員控制台（/admin）
- 👥 員工管理
  - 新增員工
  - 編輯員工資料
  - 變更員工角色
  - 停用/啟用員工
  - 重設密碼
- 🕐 打卡記錄管理
  - 查看所有員工打卡記錄
  - 日期和員工篩選
  - GPS 定位查看
  - 匯出 CSV
- 📝 請假管理
  - 查看所有請假申請
  - 批准/拒絕請假
  - 狀態篩選

**一般功能：**
- 打卡（上下班）
- 請假申請
- 修改密碼
- 查看個人記錄

---

### 2. 資深主管（senior_supervisor）
**代表人物：** 鍾曜任（flosZYR016）

**主管功能：**
- 📋 請假審核（/approval）
  - 批准/拒絕下屬請假
  - 查看部門請假記錄

**一般功能：**
- 打卡（上下班）
- 請假申請
- 修改密碼
- 查看個人記錄

---

### 3. 一般主管（supervisor）
**代表人物：** 陳韻安（flosCYA002）、萬晴（flosWQ001）

**主管功能：**
- 📋 請假審核（/approval）
  - 批准/拒絕下屬請假
  - 查看部門請假記錄

**一般功能：**
- 打卡（上下班）
- 請假申請
- 修改密碼
- 查看個人記錄

---

### 4. 一般員工（staff）
**代表人物：** 其他 20 位員工

**可用功能：**
- 🕐 打卡（/attendance）
  - 上班打卡
  - 下班打卡
  - GPS 自動定位
  - 查看打卡歷史
- 📝 請假（/leave）
  - 提交請假申請
  - 查看請假記錄
  - 取消待審核的請假
- 🔑 修改密碼
- 📊 個人儀表板

---

## 🔐 登入資訊

### 測試帳號

#### 管理員
```
帳號：flosHBH012
密碼：flosHBH012
```

#### 資深主管
```
帳號：flosZYR016
密碼：flosZYR016
```

#### 一般主管
```
帳號：flosCYA002
密碼：flosCYA002
```

#### 一般員工
```
帳號：flosSAF001（盧凌盈）
密碼：flosSAF001
```

**所有員工的初始密碼都等於員工編號**

---

## 📋 完整員工名單（24 位）

| 姓名 | 員工編號 | 角色 | 初始密碼 |
|------|---------|------|---------|
| 黃柏翰 | flosHBH012 | admin | flosHBH012 |
| 鍾曜任 | flosZYR016 | senior_supervisor | flosZYR016 |
| 陳韻安 | flosCYA002 | supervisor | flosCYA002 |
| 萬晴 | flosWQ001 | supervisor | flosWQ001 |
| 洪揚程 | flosHYC006 | staff | flosHYC006 |
| 劉道玄 | flosLDX011 | staff | flosLDX011 |
| 李文華 | flosLWH004 | staff | flosLWH004 |
| 劉哲軒 | flosLZX003 | staff | flosLZX003 |
| 蘇恆 | flosWL021 | staff | flosWL021 |
| 王筑句 | flosWZJ008 | staff | flosWZJ008 |
| 謝鏵翧 | flosXHY007 | staff | flosXHY007 |
| 張耿齊 | flosZGQ005 | staff | flosZGQ005 |
| 曾鈺晶 | flosZYJ002 | staff | flosZYJ002 |
| 櫃檯艾佩 | flosAP003 | staff | flosAP003 |
| 陳億燦 | flosCYC020 | staff | flosCYC020 |
| 貴臺殿嬈 | flosDR004 | staff | flosDR004 |
| 方沛瀅 | flosFPY001 | staff | flosFPY001 |
| 周稚凱 | flosZZK013 | staff | flosZZK013 |
| 陳怡安 | flosCYA015 | staff | flosCYA015 |
| 郭郁承 | flosGYC014 | staff | flosGYC014 |
| 何謙 | flosHQ019 | staff | flosHQ019 |
| 姜凱翔 | flosJKX017 | staff | flosJKX017 |
| 盧凌盈 | flosSAF001 | staff | flosSAF001 |
| 櫃檯第二台 | flosZ002 | staff | flosZ002 |

---

## 🧪 測試流程

### 1. 管理員功能測試

#### 步驟 1：登入管理員帳號
1. 前往 https://effulgent-dasik-9e082a.netlify.app/login
2. 輸入帳號：`flosHBH012`
3. 輸入密碼：`flosHBH012`
4. 點擊登入

#### 步驟 2：訪問管理員控制台
1. 點擊「管理員控制台」或前往 `/admin`
2. 應該看到三個 Tab：員工管理、打卡記錄、請假管理

#### 步驟 3：測試員工管理
- [ ] 查看所有員工列表
- [ ] 搜尋員工（輸入姓名或編號）
- [ ] 變更員工角色（選擇下拉選單）
- [ ] 編輯員工資料（點擊編輯按鈕）
- [ ] 重設員工密碼（點擊鑰匙圖示）
- [ ] 新增員工（點擊「新增員工」按鈕）
- [ ] 停用員工（點擊 X 圖示）

#### 步驟 4：測試打卡記錄管理
- [ ] 查看所有打卡記錄
- [ ] 使用日期篩選
- [ ] 使用員工篩選
- [ ] 查看 GPS 定位（點擊「查看」按鈕）
- [ ] 匯出 CSV（點擊「匯出 CSV」按鈕）

#### 步驟 5：測試請假管理
- [ ] 查看所有請假申請
- [ ] 使用狀態篩選（待審核/已批准/已拒絕）
- [ ] 批准請假（點擊「批准」按鈕）
- [ ] 拒絕請假（點擊「拒絕」按鈕並輸入原因）

---

### 2. 主管功能測試

#### 步驟 1：登入主管帳號
1. 登出管理員帳號
2. 登入主管帳號：`flosZYR016` / `flosZYR016`

#### 步驟 2：測試請假審核
1. 前往「請假審核」頁面（/approval）
2. 應該看到待審核的請假申請
3. 測試批准和拒絕功能

#### 步驟 3：確認權限限制
1. 嘗試訪問 `/admin`
2. 應該被拒絕並顯示「您沒有權限訪問此頁面」

---

### 3. 員工功能測試

#### 步驟 1：登入員工帳號
1. 登出主管帳號
2. 登入員工帳號：`flosSAF001` / `flosSAF001`

#### 步驟 2：測試打卡功能
1. 前往「打卡」頁面（/attendance）
2. 點擊「上班打卡」
3. 允許瀏覽器取得位置
4. 確認打卡成功並顯示 GPS 座標
5. 點擊「下班打卡」
6. 確認工時計算正確

#### 步驟 3：測試請假功能
1. 前往「請假管理」頁面（/leave）
2. 點擊「申請請假」
3. 填寫請假資料
4. 提交申請
5. 查看請假記錄

#### 步驟 4：測試修改密碼
1. 前往「修改密碼」頁面
2. 輸入舊密碼和新密碼
3. 確認修改成功
4. 登出並使用新密碼登入

#### 步驟 5：確認權限限制
1. 嘗試訪問 `/admin`
2. 應該被拒絕
3. 嘗試訪問 `/approval`
4. 應該被拒絕

---

## 🎯 功能清單

### ✅ 已實裝功能

#### 核心功能
- [x] 登入系統
- [x] 角色權限控制
- [x] 密碼修改
- [x] 個人儀表板

#### 打卡系統
- [x] 上班打卡
- [x] 下班打卡
- [x] GPS 自動定位
- [x] 工時自動計算
- [x] 打卡歷史查詢
- [x] 管理員查看所有記錄
- [x] 打卡記錄匯出（CSV）

#### 請假系統
- [x] 請假申請
- [x] 請假記錄查詢
- [x] 取消待審核請假
- [x] 主管審核請假
- [x] 批准/拒絕請假
- [x] 拒絕原因記錄
- [x] 管理員查看所有記錄

#### 管理員功能
- [x] 員工管理（CRUD）
- [x] 權限分配
- [x] 密碼重設
- [x] 打卡記錄管理
- [x] 請假記錄管理
- [x] 資料匯出

#### 權限控制
- [x] 三級權限分層
- [x] 路由權限檢查
- [x] 功能權限控制

---

## 📱 使用流程

### 員工日常使用

#### 早上上班
1. 打開系統
2. 登入帳號
3. 點擊「打卡」
4. 點擊「上班打卡」
5. 完成！

#### 晚上下班
1. 打開系統
2. 點擊「打卡」
3. 點擊「下班打卡」
4. 查看今日工時
5. 完成！

#### 申請請假
1. 打開系統
2. 點擊「請假管理」
3. 點擊「申請請假」
4. 填寫請假資料
5. 提交申請
6. 等待主管審核

---

### 主管日常使用

#### 審核請假
1. 打開系統
2. 點擊「請假審核」
3. 查看待審核申請
4. 點擊「批准」或「拒絕」
5. 完成！

---

### 管理員日常使用

#### 查看打卡記錄
1. 打開系統
2. 點擊「管理員控制台」
3. 切換到「打卡記錄」Tab
4. 使用篩選功能
5. 匯出 CSV（如需要）

#### 管理員工
1. 打開系統
2. 點擊「管理員控制台」
3. 切換到「員工管理」Tab
4. 新增/編輯/停用員工
5. 變更權限
6. 重設密碼

---

## 🔧 技術資訊

### 前端
- **框架：** React + TypeScript + Vite
- **UI 庫：** shadcn/ui + Tailwind CSS
- **路由：** wouter
- **狀態管理：** React Hooks
- **資料庫：** Supabase（直接連線）

### 資料表結構

#### employees
- id（主鍵）
- employee_id（員工編號，唯一）
- name（姓名）
- password（密碼，SHA-256 雜湊）
- role（角色）
- position（職位）
- phone（電話）
- employment_status（在職狀態）
- 其他欄位...

#### attendance_records
- id（主鍵）
- employee_id（員工 ID）
- employee_name（員工姓名）
- work_date（工作日期）
- check_in_time（上班時間）
- check_out_time（下班時間）
- check_in_latitude（上班定位緯度）
- check_in_longitude（上班定位經度）
- check_out_latitude（下班定位緯度）
- check_out_longitude（下班定位經度）
- work_hours（工時）
- 其他欄位...

#### leave_requests
- id（主鍵）
- employee_id（員工 ID）
- leave_type（假別）
- start_date（開始日期）
- end_date（結束日期）
- days（天數）
- reason（原因）
- status（狀態）
- approved_by（審核人）
- approved_at（審核時間）
- rejection_reason（拒絕原因）
- 其他欄位...

---

## 🚀 部署資訊

### 前端部署
- **平台：** Netlify
- **分支：** main
- **自動部署：** 是
- **部署時間：** 約 90 秒

### 資料庫
- **平台：** Supabase
- **連線方式：** 直接連線（Supabase Client）
- **安全性：** SHA-256 密碼雜湊

---

## 📝 注意事項

### 密碼安全
- 所有密碼使用 SHA-256 雜湊儲存
- 初始密碼等於員工編號
- **首次登入後請立即修改密碼**

### GPS 定位
- 需要允許瀏覽器取得位置
- 定位精度取決於裝置和環境
- 定位資訊會儲存在打卡記錄中

### 權限控制
- 嘗試訪問無權限頁面會被重定向
- 顯示錯誤訊息提示
- 不會影響系統穩定性

### 資料備份
- 所有資料儲存在 Supabase
- Supabase 自動備份
- 建議定期匯出重要資料

---

## 🐛 常見問題

### Q: 無法登入？
A: 請確認：
1. 員工編號和密碼是否正確
2. 帳號是否已停用
3. 網路連線是否正常

### Q: 打卡時無法取得 GPS？
A: 請確認：
1. 是否允許瀏覽器取得位置
2. 裝置是否開啟定位服務
3. 是否在室內（可能影響精度）

### Q: 請假申請後看不到？
A: 請確認：
1. 是否提交成功（查看提示訊息）
2. 重新整理頁面
3. 檢查網路連線

### Q: 管理員無法訪問控制台？
A: 請確認：
1. 角色是否為 admin
2. 是否已登入
3. 清除瀏覽器快取後重試

---

## 📞 支援

如有任何問題或建議，請聯繫系統管理員。

---

## ✅ 系統完成檢查清單

### 資料庫
- [x] 資料表結構完整
- [x] 所有欄位已建立
- [x] 索引已建立
- [x] 員工資料完整

### 功能實裝
- [x] 登入系統
- [x] 打卡系統
- [x] 請假系統
- [x] 管理員功能
- [x] 權限控制

### 測試
- [ ] 管理員功能測試
- [ ] 主管功能測試
- [ ] 員工功能測試
- [ ] 權限控制測試

### 部署
- [x] 程式碼已推送到 GitHub
- [x] Netlify 自動部署
- [ ] 部署完成驗證

---

**系統已準備就緒，可以開始使用！** 🎉

**建立日期：** 2025-12-08  
**版本：** 1.0.0  
**維護者：** FLOS 開發團隊
