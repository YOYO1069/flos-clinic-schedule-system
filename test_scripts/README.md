# 訪客記錄系統測試工具

本目錄包含訪客記錄系統的完整測試工具和腳本。

## 📁 檔案說明

### 1. `quick_test.sql`
**快速測試腳本** - 執行時間 < 1 分鐘

用途：快速驗證系統基本功能和資料完整性

使用方法：
1. 登入 Supabase Dashboard
2. 進入 SQL Editor
3. 複製貼上整個檔案內容
4. 執行查詢
5. 檢查所有測試結果為 ✅ PASS

包含測試：
- 表格和 RLS 設定確認
- 資料記錄檢查
- 資料完整性驗證
- 訪問統計
- 角色分布
- IP 查詢成功率

---

### 2. `test_rls_policies.html`
**RLS 政策測試工具** - 互動式網頁工具

用途：測試 Row Level Security 政策是否正確運作

使用方法：
1. 在瀏覽器中開啟此 HTML 檔案
2. 輸入 Supabase URL 和 Anon Key
3. 點擊「初始化連線」
4. 依序執行 4 個測試
5. 查看測試摘要

包含測試：
- 測試 1: 未登入使用者插入記錄
- 測試 2: 已登入使用者插入記錄
- 測試 3: 管理員查看所有記錄
- 測試 4: 非管理員嘗試查看記錄

**注意**：此工具需要系統支援 email/password 登入方式。如果系統使用其他登入方式，請調整測試代碼。

---

### 3. `TEST_CHECKLIST.md`
**測試檢查清單** - 完整測試流程

用途：提供結構化的測試流程和記錄表單

使用方法：
1. 列印或在螢幕上開啟此檔案
2. 按照清單逐項執行測試
3. 勾選完成的項目
4. 記錄測試結果和備註
5. 填寫測試摘要和簽核

包含內容：
- 前置準備檢查
- 快速驗證（5 分鐘）
- 功能測試（15 分鐘）
- RLS 政策驗證（10 分鐘）
- 資料完整性檢查（5 分鐘）
- 效能測試（5 分鐘）
- 跨瀏覽器測試（10 分鐘）
- 核心功能穩定性確認
- 測試摘要和簽核

---

## 🚀 快速開始

### 方案 1: 快速驗證（推薦新手）
1. 執行 `quick_test.sql` 在 Supabase SQL Editor
2. 檢查所有結果為 ✅ PASS
3. 如有 ❌ FAIL，參考詳細測試計畫

### 方案 2: 完整測試（推薦正式驗證）
1. 開啟 `TEST_CHECKLIST.md`
2. 按照清單逐項執行
3. 記錄所有測試結果
4. 填寫測試摘要

### 方案 3: RLS 政策專項測試
1. 開啟 `test_rls_policies.html` 在瀏覽器
2. 輸入 Supabase 配置
3. 執行所有測試
4. 確認 RLS 政策正常運作

---

## 📚 相關文件

- **VISITOR_LOGS_TEST_PLAN.md** - 完整測試計畫文件
- **VISITOR_LOGS_SETUP_GUIDE.md** - visitor_logs 表建立指南
- **CHANGELOG_2025-12-06.md** - 系統變更日誌
- **DEPLOYMENT_REPORT_2025-12-06.md** - 部署報告

---

## ⚠️ 注意事項

1. **測試環境**
   - 建議在非生產環境進行測試
   - 如需在生產環境測試，請注意不要刪除重要資料

2. **測試資料**
   - 測試會產生訪客記錄資料
   - 如需清理，請參考測試計畫中的「測試資料清理」章節

3. **RLS 政策測試**
   - 需要實際的測試帳號和密碼
   - 確保有 admin 和非 admin 帳號可用

4. **瀏覽器相容性**
   - 建議使用最新版本的 Chrome, Firefox, Safari
   - 行動裝置測試需要實際裝置或模擬器

---

## 🐛 問題回報

如在測試過程中發現問題，請記錄：
- 測試案例編號
- 重現步驟
- 預期結果 vs 實際結果
- 截圖或錯誤訊息
- 環境資訊（瀏覽器、作業系統等）

---

**文件版本**: 1.0  
**最後更新**: 2025-12-06  
**維護者**: FLOS 診所系統開發團隊
